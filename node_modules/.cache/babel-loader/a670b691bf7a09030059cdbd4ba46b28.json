{"ast":null,"code":"import _regeneratorRuntime from\"/Users/petewalker/Desktop/portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/petewalker/Desktop/portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/petewalker/Desktop/portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import ReactDom from\"react-dom\";import Hero from\"../components/Hero\";import Content from\"../components/Content\";import axios from\"axios\";function BookSearch(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),book=_useState2[0],setBook=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),height=_useState4[0],setHeight=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),result=_useState6[0],setResult=_useState6[1];var _useState7=useState(\"AIzaSyDt5mXFwvWgydKIRaJuWccj2yKB8VtXCms\"),_useState8=_slicedToArray(_useState7,2),apiKey=_useState8[0],setApiKey=_useState8[1];var bookShelf=[];function handleChange(event){var book=event.target.value;setBook(book);}function handleHeight(event){var height=event.target.value;setHeight(height);}function filterBooks(_x){return _filterBooks.apply(this,arguments);}function _filterBooks(){_filterBooks=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(book){var h,bool;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:h=0;bool=true;_context.next=4;return axios.get(\"https://www.googleapis.com/books/v1/volumes/\"+book.id+\"?key=\"+apiKey).then(function(data){if(!data.data.volumeInfo.hasOwnProperty(\"dimensions\")){bool=false;}else{h=data.data.volumeInfo.dimensions.height;}if(!data.data.volumeInfo.hasOwnProperty(\"imageLinks\")){bool=false;}else if(!data.data.volumeInfo.imageLinks.hasOwnProperty(\"thumbnail\")){bool=false;}}).catch(function(){console.log(\"error in filter\");});case 4:console.log(book.volumeInfo.title+\" has a height of \"+h+\" compared to limit of height \"+height+bool);return _context.abrupt(\"return\",bool&&h<=height);case 6:case\"end\":return _context.stop();}}},_callee);}));return _filterBooks.apply(this,arguments);}function handleSubmit(event){event.preventDefault();axios.get(\"https://www.googleapis.com/books/v1/volumes?q=\"+book+\"&orderBy=newest&printType=books&key=\"+apiKey).then(function(data){console.log(data.data.items);setResult(data.data.items);}).catch(function(){console.log(\"error\");});}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Hero,{title:props.title}),/*#__PURE__*/React.createElement(\"div\",{class:\"container\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:handleChange,className:\"form-control mt-10\",placeholder:\"search for books\",autoComplete:\"off\"}),/*#__PURE__*/React.createElement(\"br\",{className:\"p-5\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:handleHeight,className:\"form-input\",placeholder:\"enter max height in cm\",autoComplete:\"off\"}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-danger\"},\"search\"))),bookShelf=result.filter(filterBooks),console.log(bookShelf)));}/*\nresult.filter(filterBooks).map(async (book) =>\n          (\n            <a target=\"_blank\" href={await book.volumeInfo.previewLink}>\n              <img\n                src={await book.volumeInfo.imageLinks.thumbnail}\n                alt={await book.title}\n              />\n            </a>\n          ).catch()\n        )\n\n        {bookShelf.map((book) => (\n          <p>{book.volumeInfo.title}</p>\n        ))}\n*/export default BookSearch;","map":{"version":3,"sources":["/Users/petewalker/Desktop/portfolio-site/src/pages/BookSearch.js"],"names":["React","useState","ReactDom","Hero","Content","axios","BookSearch","props","book","setBook","height","setHeight","result","setResult","apiKey","setApiKey","bookShelf","handleChange","event","target","value","handleHeight","filterBooks","h","bool","get","id","then","data","volumeInfo","hasOwnProperty","dimensions","imageLinks","catch","console","log","title","handleSubmit","preventDefault","items","filter"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport ReactDom from \"react-dom\";\nimport Hero from \"../components/Hero\";\nimport Content from \"../components/Content\";\nimport axios from \"axios\";\n\nfunction BookSearch(props) {\n  const [book, setBook] = useState(\"\");\n  const [height, setHeight] = useState(\"\");\n  const [result, setResult] = useState([]);\n  const [apiKey, setApiKey] = useState(\n    \"AIzaSyDt5mXFwvWgydKIRaJuWccj2yKB8VtXCms\"\n  );\n  var bookShelf = [];\n\n  function handleChange(event) {\n    const book = event.target.value;\n    setBook(book);\n  }\n\n  function handleHeight(event) {\n    const height = event.target.value;\n    setHeight(height);\n  }\n\n  async function filterBooks(book) {\n    let h = 0;\n    let bool = true;\n    await axios\n      .get(\n        \"https://www.googleapis.com/books/v1/volumes/\" +\n          book.id +\n          \"?key=\" +\n          apiKey\n      )\n      .then((data) => {\n        if (!data.data.volumeInfo.hasOwnProperty(\"dimensions\")) {\n          bool = false;\n        } else {\n          h = data.data.volumeInfo.dimensions.height;\n        }\n        if (!data.data.volumeInfo.hasOwnProperty(\"imageLinks\")) {\n          bool = false;\n        } else if (\n          !data.data.volumeInfo.imageLinks.hasOwnProperty(\"thumbnail\")\n        ) {\n          bool = false;\n        }\n      })\n      .catch(() => {\n        console.log(\"error in filter\");\n      });\n    console.log(\n      book.volumeInfo.title +\n        \" has a height of \" +\n        h +\n        \" compared to limit of height \" +\n        height +\n        bool\n    );\n    return bool && h <= height;\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    axios\n      .get(\n        \"https://www.googleapis.com/books/v1/volumes?q=\" +\n          book +\n          \"&orderBy=newest&printType=books&key=\" +\n          apiKey\n      )\n      .then((data) => {\n        console.log(data.data.items);\n        setResult(data.data.items);\n      })\n      .catch(() => {\n        console.log(\"error\");\n      });\n  }\n\n  return (\n    <div>\n      <Hero title={props.title}></Hero>\n      <div class=\"container\">\n        <form onSubmit={handleSubmit}>\n          <div class=\"form-group\">\n            <input\n              type=\"text\"\n              onChange={handleChange}\n              className=\"form-control mt-10\"\n              placeholder=\"search for books\"\n              autoComplete=\"off\"\n            />\n            <br className=\"p-5\"></br>\n            <input\n              type=\"text\"\n              onChange={handleHeight}\n              className=\"form-input\"\n              placeholder=\"enter max height in cm\"\n              autoComplete=\"off\"\n            />\n            <button type=\"submit\" className=\"btn btn-danger\">\n              search\n            </button>\n          </div>\n        </form>\n        {(bookShelf = result.filter(filterBooks))}\n        {console.log(bookShelf)}\n      </div>\n    </div>\n  );\n}\n/*\nresult.filter(filterBooks).map(async (book) =>\n          (\n            <a target=\"_blank\" href={await book.volumeInfo.previewLink}>\n              <img\n                src={await book.volumeInfo.imageLinks.thumbnail}\n                alt={await book.title}\n              />\n            </a>\n          ).catch()\n        )\n\n        {bookShelf.map((book) => (\n          <p>{book.volumeInfo.title}</p>\n        ))}\n*/\n\nexport default BookSearch;\n"]},"metadata":{},"sourceType":"module"}