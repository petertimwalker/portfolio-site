{"ast":null,"code":"import _classCallCheck from\"/Users/petewalker/Desktop/portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/petewalker/Desktop/portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/petewalker/Desktop/portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/petewalker/Desktop/portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import SearchArea from\"./SearchArea\";import BookList from\"./BookList\";import axios from\"axios\";import noImg from\"../assets/images/logo512.png\";var Books=/*#__PURE__*/function(_React$Component){_inherits(Books,_React$Component);var _super=_createSuper(Books);function Books(props){var _this;_classCallCheck(this,Books);_this=_super.call(this,props);_this.searchBook=function(event){event.preventDefault();axios.get(\"https://www.googleapis.com/books/v1/volumes?q=\"+_this.state.searchField+\"&key=\"+_this.state.apiKey).then(function(data){var cleanData=_this.cleanData(data.data.items);var filterAuthor=_this.filterAuthor(cleanData);_this.setState({books:filterAuthor});});};_this.cleanData=function(data){var cleanedData=data.map(function(book){if(book.volumeInfo.hasOwnProperty(\"publishedDate\")===false){book.volumeInfo[\"publishedDate\"]=\"0000\";}else if(book.volumeInfo.hasOwnProperty(\"imageLinks\")===false){book.volumeInfo[\"imageLinks\"]={thumbnail:noImg};}return book;});return cleanedData;};_this.filterAuthor=function(data){var filterAuthor=data.filter(function(book){//if data.authors is an array\nfor(var key in book.volumeInfo.authors){if(book.volumeInfo.authors[key].toLowerCase()==_this.state.searchField.toLowerCase()){return true;}}return false;});return filterAuthor;};_this.handleSearch=function(event){_this.setState({searchField:event.target.value});};_this.handleSort=function(event){_this.setState({sort:event.target.value});};_this.state={books:[],searchField:\"\",apiKey:\"AIzaSyDt5mXFwvWgydKIRaJuWccj2yKB8VtXCms\",sort:\"Newest\"};return _this;}_createClass(Books,[{key:\"render\",value:function render(){var _this2=this;var sortedBooks=[];sortedBooks=this.state.books.sort(function(a,b){if(_this2.state.sort===\"Newest\"){//if same yr\nif(b.volumeInfo.publishedDate.substring(0,4)===a.volumeInfo.publishedDate.substring(0,4)){if(a.volumeInfo.publishedDate.length===4){return 1;}else if(b.volumeInfo.publishedDate.length===4){return-1;}else if(b.volumeInfo.publishedDate.substring(5,7)===a.volumeInfo.publishedDate.substring(5,7)){return parseInt(b.volumeInfo.publishedDate.substring(8,10))-parseInt(a.volumeInfo.publishedDate.substring(8,10));}return parseInt(b.volumeInfo.publishedDate.substring(5,7))-parseInt(a.volumeInfo.publishedDate.substring(5,7));}return parseInt(b.volumeInfo.publishedDate.substring(0,4))-parseInt(a.volumeInfo.publishedDate.substring(0,4));///end\n}else if(_this2.state.sort===\"Oldest\"){//first check if year is the same\n//then month\nif(a.volumeInfo.publishedDate.substring(0,4)===b.volumeInfo.publishedDate.substring(0,4)){if(b.volumeInfo.publishedDate.length===4){return 1;}else if(a.volumeInfo.publishedDate.length===4){return-1;}else if(a.volumeInfo.publishedDate.substring(5,7)===b.volumeInfo.publishedDate.substring(5,7)){return parseInt(a.volumeInfo.publishedDate.substring(8,10))-parseInt(b.volumeInfo.publishedDate.substring(8,10));}return parseInt(a.volumeInfo.publishedDate.substring(5,7))-parseInt(b.volumeInfo.publishedDate.substring(5,7));}return parseInt(a.volumeInfo.publishedDate.substring(0,4))-parseInt(b.volumeInfo.publishedDate.substring(0,4));}});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(SearchArea,{searchBook:this.searchBook,handleSearch:this.handleSearch,handleSort:this.handleSort}),/*#__PURE__*/React.createElement(BookList,{books:sortedBooks}));}}]);return Books;}(React.Component);export default Books;","map":{"version":3,"sources":["/Users/petewalker/Desktop/portfolio-site/src/components/Books.js"],"names":["React","SearchArea","BookList","axios","noImg","Books","props","searchBook","event","preventDefault","get","state","searchField","apiKey","then","data","cleanData","items","filterAuthor","setState","books","cleanedData","map","book","volumeInfo","hasOwnProperty","thumbnail","filter","key","authors","toLowerCase","handleSearch","target","value","handleSort","sort","sortedBooks","a","b","publishedDate","substring","length","parseInt","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport SearchArea from \"./SearchArea\";\nimport BookList from \"./BookList\";\nimport axios from \"axios\";\nimport noImg from \"../assets/images/logo512.png\";\n\nclass Books extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      books: [],\n      searchField: \"\",\n      apiKey: \"AIzaSyDt5mXFwvWgydKIRaJuWccj2yKB8VtXCms\",\n      sort: \"Newest\",\n    };\n  }\n\n  searchBook = (event) => {\n    event.preventDefault();\n    axios\n      .get(\n        \"https://www.googleapis.com/books/v1/volumes?q=\" +\n          this.state.searchField +\n          \"&key=\" +\n          this.state.apiKey\n      )\n      .then((data) => {\n        const cleanData = this.cleanData(data.data.items);\n        const filterAuthor = this.filterAuthor(cleanData);\n\n        this.setState({ books: filterAuthor });\n      });\n  };\n\n  cleanData = (data) => {\n    const cleanedData = data.map((book) => {\n      if (book.volumeInfo.hasOwnProperty(\"publishedDate\") === false) {\n        book.volumeInfo[\"publishedDate\"] = \"0000\";\n      } else if (book.volumeInfo.hasOwnProperty(\"imageLinks\") === false) {\n        book.volumeInfo[\"imageLinks\"] = { thumbnail: noImg };\n      }\n      return book;\n    });\n    return cleanedData;\n  };\n\n  filterAuthor = (data) => {\n    const filterAuthor = data.filter((book) => {\n      //if data.authors is an array\n      for (var key in book.volumeInfo.authors) {\n        if (\n          book.volumeInfo.authors[key].toLowerCase() ==\n          this.state.searchField.toLowerCase()\n        ) {\n          return true;\n        }\n      }\n      return false;\n    });\n    return filterAuthor;\n  };\n\n  handleSearch = (event) => {\n    this.setState({ searchField: event.target.value });\n  };\n\n  handleSort = (event) => {\n    this.setState({ sort: event.target.value });\n  };\n\n  render() {\n    let sortedBooks = [];\n    sortedBooks = this.state.books.sort((a, b) => {\n      if (this.state.sort === \"Newest\") {\n        //if same yr\n        if (\n          b.volumeInfo.publishedDate.substring(0, 4) ===\n          a.volumeInfo.publishedDate.substring(0, 4)\n        ) {\n          if (a.volumeInfo.publishedDate.length === 4) {\n            return 1;\n          } else if (b.volumeInfo.publishedDate.length === 4) {\n            return -1;\n          } else if (\n            b.volumeInfo.publishedDate.substring(5, 7) ===\n            a.volumeInfo.publishedDate.substring(5, 7)\n          ) {\n            return (\n              parseInt(b.volumeInfo.publishedDate.substring(8, 10)) -\n              parseInt(a.volumeInfo.publishedDate.substring(8, 10))\n            );\n          }\n          return (\n            parseInt(b.volumeInfo.publishedDate.substring(5, 7)) -\n            parseInt(a.volumeInfo.publishedDate.substring(5, 7))\n          );\n        }\n        return (\n          parseInt(b.volumeInfo.publishedDate.substring(0, 4)) -\n          parseInt(a.volumeInfo.publishedDate.substring(0, 4))\n        );\n        ///end\n      } else if (this.state.sort === \"Oldest\") {\n        //first check if year is the same\n        //then month\n        if (\n          a.volumeInfo.publishedDate.substring(0, 4) ===\n          b.volumeInfo.publishedDate.substring(0, 4)\n        ) {\n          if (b.volumeInfo.publishedDate.length === 4) {\n            return 1;\n          } else if (a.volumeInfo.publishedDate.length === 4) {\n            return -1;\n          } else if (\n            a.volumeInfo.publishedDate.substring(5, 7) ===\n            b.volumeInfo.publishedDate.substring(5, 7)\n          ) {\n            return (\n              parseInt(a.volumeInfo.publishedDate.substring(8, 10)) -\n              parseInt(b.volumeInfo.publishedDate.substring(8, 10))\n            );\n          }\n          return (\n            parseInt(a.volumeInfo.publishedDate.substring(5, 7)) -\n            parseInt(b.volumeInfo.publishedDate.substring(5, 7))\n          );\n        }\n        return (\n          parseInt(a.volumeInfo.publishedDate.substring(0, 4)) -\n          parseInt(b.volumeInfo.publishedDate.substring(0, 4))\n        );\n      }\n    });\n    return (\n      <div>\n        <SearchArea\n          searchBook={this.searchBook}\n          handleSearch={this.handleSearch}\n          handleSort={this.handleSort}\n        ></SearchArea>\n        <BookList books={sortedBooks} />\n      </div>\n    );\n  }\n}\n\nexport default Books;\n"]},"metadata":{},"sourceType":"module"}